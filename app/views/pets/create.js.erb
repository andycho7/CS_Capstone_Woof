<% if @pet.errors.empty? %>
  $('#new_pet_card_<%= @pet.group.id.to_s %>').before('<%= j render(:partial => 'pets/card', :locals => {group: @pet.group, pet: @pet, j: 0, weight_options: Weight.all}) %>');
  // clear new form fields
  card = $('#new_pet_card_group_<%=@pet.group_id.to_s%>');
  card.replaceWith('<%= j render(:partial => 'pets/form_card', :locals => {group: @pet.group, pet: Pet.new, weight_options: Weight.all, hide: false}) %>');
<% else %> // errors
  // show errors on the form
  card = $('#new_pet_card_group_<%=@pet.group_id.to_s%>');
  card.replaceWith('<%= j render(:partial => 'pets/form_card', :locals => {group: @pet.group, pet: @pet, weight_options: Weight.all, hide: false}) %>');
  //highlightSelect2Error(card, '.colors-selector');
<% end %>

bindSelect2Elements(); // application.js
